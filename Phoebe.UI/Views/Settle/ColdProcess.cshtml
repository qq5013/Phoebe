@model IEnumerable<Phoebe.Model.DailyColdRecord>

@{
    Layout = null;
    ViewBag.Title = "ColdProcess";

    AjaxOptions ajaxOpts2 = new AjaxOptions
    {
        UpdateTargetId = "cold-settle",
        Url = Url.Action("ColdStart", "Settle"),
        HttpMethod = "POST"
    };
}

<div class="row" id="process-container">
    <div class="col-md-12">
        <div class="portlet box green">
            <div class="portlet-title">
                <div class="caption">
                    <i class="fa fa-list"></i>&nbsp;冷藏费表单
                </div>
                <div class="tools">
                    <a href="javascript:;" class="collapse">
                    </a>
                    <a href="javascript:;" class="reload">
                    </a>
                    <a href="javascript:;" class="remove">
                    </a>
                </div>
                <div class="actions">
                    <!--<a href="javascript:;" class="btn btn-default btn-sm btn-print">
                <i class="fa fa-print"></i>&nbsp;打印
            </a>-->
                </div>
            </div>
            <div class="portlet-body">
                <table class="table table-striped table-bordered table-hover" id="record-table">
                    <thead>
                        <tr>
                            <th>
                                @Html.DisplayNameFor(model => model.RecordDate)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.CargoName)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.Count)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.UnitMeter)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.StoreMeter)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.TotalMeter)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.DailyFee)
                            </th>
                            <th>
                                @Html.DisplayNameFor(model => model.TotalFee)
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.RecordDate)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.CargoName)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Count)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.UnitMeter)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.StoreMeter)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.TotalMeter)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.DailyFee)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.TotalFee)
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>

                @if (Model.Count() != 0)
                {
                    <hr />
                    <p>
                        @using (Ajax.BeginForm("ColdStart", new { controller = "Settle" }, ajaxOpts2, new { @class = "form-horizontal" }))
                        {
                            @Html.AntiForgeryToken()
                            <input type="hidden" id="ContractID" name="ContractID" value="@ViewBag.ContractID" />
                            <input type="hidden" id="StartTime" name="StartTime" value="@ViewBag.StartTime" />
                            <input type="hidden" id="EndTime" name="EndTime" value="@ViewBag.EndTime" />
                            <input type="hidden" id="SumPrice" name="SumPrice" value="@ViewBag.SumPrice" />

                            <button type="submit" class="btn btn-success"><i class="fa fa-check"></i> 进行结算</button>
                        }
                    </p>
                }
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(function () {
        $('div#cold-settle').empty();
    });
</script>