@model Phoebe.Model.StoreClassifyModel

@{ 
    Layout = null;
}

<style type="text/css">
    table.table-bordered th:last-child, table.table-bordered td:last-child {
        border-right-width: 1px;
    }
</style>

<div class="row">
    <div class="col-md-12">
       <div class="portlet box blue">
           <div class="portlet-title">
               <div class="caption">
                   <i class="fa fa-list"></i>&nbsp;库存分类汇总列表
               </div>
               <div class="tools">
                   <a href="javascript:;" class="collapse">
                   </a>
                   <a href="javascript:;" class="reload">
                   </a>
                   <a href="javascript:;" class="remove">
                   </a>
               </div>
           </div>
           <div class="portlet-body">
               <table class="table table-bordered">
                   <thead>
                       <tr>
                           <th>
                               一级分类
                           </th>
                           <th>
                               二级分类
                           </th>
                           <th>
                               三级分类
                           </th>
                           <th>
                               三类数量
                           </th>
                           <th>
                               三类重量(吨)
                           </th>
                           <th>
                               二类数量
                           </th>
                           <th>
                               二类重量(吨)
                           </th>
                           <th>
                               一类数量
                           </th>
                           <th>
                               一类重量(吨)
                           </th>
                       </tr>
                   </thead>
                   <tfoot>
                       <tr>
                           <th colspan="7">
                               合计
                           </th>
                           <th>
                               @Model.StoreCount
                           </th>
                           <th>
                               @Model.Weight
                           </th>
                       </tr>
                   </tfoot>
                   <tbody>
                       @foreach (var item in Model.FirstStore)
                       {
                        <tr>
                            <td rowspan="@item.SecondStore.Sum(r => r.ThirdStore.Count)">
                                @item.FirstCategoryName
                            </td>
                            <td rowspan="@item.SecondStore[0].ThirdStore.Count">
                                @item.SecondStore[0].SecondCategoryName
                            </td>
                            <td>
                                @item.SecondStore[0].ThirdStore[0].ThirdCategoryName
                            </td>
                            <td>
                                @item.SecondStore[0].ThirdStore[0].StoreCount
                            </td>
                            <td>
                                @item.SecondStore[0].ThirdStore[0].Weight
                            </td>
                            <td rowspan="@item.SecondStore[0].ThirdStore.Count">
                                @item.SecondStore[0].StoreCount
                            </td>
                            <td rowspan="@item.SecondStore[0].ThirdStore.Count">
                                @item.SecondStore[0].Weight
                            </td>
                            <td rowspan="@item.SecondStore.Sum(r => r.ThirdStore.Count)">
                                @item.StoreCount
                            </td>
                            <td rowspan="@item.SecondStore.Sum(r => r.ThirdStore.Count)">
                                @item.Weight
                            </td>
                        </tr>
                           for (int i = 1; i < item.SecondStore[0].ThirdStore.Count; i++)
                           {
                            <tr>
                                <td>
                                    @item.SecondStore[0].ThirdStore[i].ThirdCategoryName
                                </td>
                                <td>
                                    @item.SecondStore[0].ThirdStore[i].StoreCount
                                </td>
                                <td>
                                    @item.SecondStore[0].ThirdStore[i].Weight
                                </td>
                            </tr>
                           }

                           for (int i = 1; i < item.SecondStore.Count; i++)
                           {
                            <tr>
                                <td rowspan="@item.SecondStore[i].ThirdStore.Count">
                                    @item.SecondStore[i].SecondCategoryName
                                </td>
                                <td>
                                    @item.SecondStore[i].ThirdStore[0].ThirdCategoryName
                                </td>
                                <td>
                                    @item.SecondStore[i].ThirdStore[0].StoreCount
                                </td>
                                <td>
                                    @item.SecondStore[i].ThirdStore[0].Weight
                                </td>
                                <td rowspan="@item.SecondStore[i].ThirdStore.Count">
                                    @item.SecondStore[i].StoreCount
                                </td>
                                <td rowspan="@item.SecondStore[i].ThirdStore.Count">
                                    @item.SecondStore[i].Weight
                                </td>
                            </tr>

                               for (int j = 1; j < item.SecondStore[i].ThirdStore.Count; j++)
                               {
                                <tr>
                                    <td>
                                        @item.SecondStore[i].ThirdStore[j].ThirdCategoryName
                                    </td>
                                    <td>
                                        @item.SecondStore[i].ThirdStore[j].StoreCount
                                    </td>
                                    <td>
                                        @item.SecondStore[i].ThirdStore[j].Weight
                                    </td>
                                </tr>
                               }
                           }
                       }
                   </tbody>
               </table>
           </div>
       </div>
    </div>
</div>
